version: '3.8'

services:
  vrising:
    build: .
    image: vrising-arm64
    container_name: vrising-server
    restart: unless-stopped
    ports:
      - "9876:9876/udp"
      - "9877:9877/udp"
    environment:
      - SERVER_NAME=MyVServer
      - SAVE_NAME=world1
      # Box64 optimization for Wine compatibility
      - BOX64_DYNAREC_SAFEFLAGS=1
      - BOX64_DYNAREC_STRONGMEM=2
      - BOX64_LOG=1
      - BOX64_MAXCPU=64
      # Extra command line arguments for VRisingServer.exe (optional)
      - EXTRA_ARGS=
    volumes:
      - ./server-data:/data
    # Increase shared memory size for Wine/Box64
    shm_size: '2gb'
    tty: true
    stdin_open: true

